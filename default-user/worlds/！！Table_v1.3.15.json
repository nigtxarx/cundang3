{
    "entries": {
        "0": {
            "key": [],
            "keysecondary": [],
            "comment": "===说明===",
            "content": "{{//**此条目在注释内，不会发送给AI，无需关闭**\n\n**一种适合多角色（因此相对轻量），适合多数场景且易于扩展、兼容性良好（允许与带CoT的预设/卡等共同使用）的记忆增强表格预设**\n\n发布于：https://discord.com/channels/1291925535324110879/1361647748738322432\n\n记忆增强插件：https://discord.com/channels/1134557553011998840/1338524991477649502\n\n基于404的0.66版预设：https://discord.com/channels/1291925535324110879/1347479196514910229\n进行了大量修改\n\n:pushpin:图钉符号表示相关内容在原发布处已标注消息，限于消息长度无法直接给出链接，可点击dc右上角图钉按钮查看\n**加粗表示可选项和其他重点**\n对填表有临时要求则直接在输入中备注即可\n\n# 使用方法\n导入表格预设和此配套世界书，打开世界书配置参数\n包括**参数配置**、表格提示词（因此表格预设关闭注入）、后置强调（包括是否与其他思维链共同使用两种版本）、用户消息标签包裹和:pushpin:四个可选的推测填表加强（两个需要提示词模板插件）\n\n:pushpin:若原先未用本预设，请从新聊天开始使用，有详细教程\n\n:pushpin:跨中版本（即前两版本号存在差异，表示表格结构存在差异）更新可使用转换工具\n\n:pushpin:两个可选正则，不向AI发送历史tableThink和tableEdit，在纠错时（只要<tableThink>或<tableEdit>的标签还完整）或希望避免模仿历史操作时可以试试看；视模型和预设不同，有的更适合保持开启，有的更适合关闭\n\n推荐可选插件：https://github.com/SillyTavern/Extension-MessageLimit\n设置限制5-10层即可\n\n当前信息、近期角色以及事件历史表高频更新，其他低频更新。其中事件历史表几乎不会错。因此配置0-5表格推送至对话：\n**通常只需检查当前信息及近期角色表格是否正确，其他推送表格通常无需改变因此只需扫一眼是否有多余操作即可，仅当需要更新时才需关注其他表格**\n**出现问题请及时处理，否则ai就会模仿着继续错下去，避免模仿可用前述正则**\n\n:pushpin:预设内推送样式有修改，允许自动换行以避免左右滚动，适合pc；默认展开，便于检查\n\n# 核心思想\nAI输出不可避免存在错误，我们的目标是人工检查和修改最小化，因此：\n- 分离需要高频/低频操作的表格\n- 对于高频操作表格，尽量容忍AI输出错误并在后续轮中自修复\n- 对于极低频更新表格，宁可少修改（需要修改时可能需要用户提醒），也胜过AI频繁改错导致需要用户总是检查且频繁修正或重新生成\n\n此外配合世界书使用，将需要强调的内容分离并后置d0，允许表格提示词只置于d1，以保证对用户最后消息的注意力\n\n# 表格构成\n0:当前信息-时间/地点/<user>拥有资金\n\n一些基础信息，结合近期角色表可代替一些状态栏。\n\n1:近期角色-角色名/离场轮数/位置/姿势/情绪/身体状态/服装\n\n通过离场轮数控制删除行。**当前写的是达到5时删除，可随回复长短调整，比如短回复可能提高一些限额。**另一方面，离场轮数只用于控制删除，比如“当前轮离开的角色置为1还是0”、“本轮达到5删除还是下一轮删除”等都不要紧，只要保证未出场角色的计数在+1，后续输出ai就会自动处理。\n\n2:角色信息-角色名/性别/年龄/身份/住所/身体特征/服装偏好/性格/喜好/目标/关系（是<user>的——）/对<user>态度/其他重要信息\n\n通常不变的重要角色信息。其中记录服装偏好而非服装，用以允许日常更换服装。\n仅限用户声明时删除，允许角色隔几十上百层再出场，乃至死亡角色要保留作为背景之类的需求。\n\n3:任务及日程-执行人/任务或日程/委托人/报酬/地点/起始时间/结束或限制时间\n4:能力-拥有人/能力名/效果/代价/来源\n5:物品-拥有人/物品名/数量/描述/效果或意义/来源\n\n一些常用组件。\n\n6:事件历史-时间/地点/事件\n\n每轮总结事件，默认每轮1-3条30字以内条目，适配长回复的gemini。**如果短回复也可以考虑适当减小。**\n大总结时会清空，且仅限大总结时会删除。\n\n7:大总结-时间范围/内容\n\n仅限用户声明时进行大总结（比如{执行大总结}），不自动大总结。从而允许仅当故事告一段落时（我自己使用一般是百来层）才进行大总结，避免将一个事件分割到两个大总结中，同时也进一步保证了事件历史表无误。**默认要求分为不超过5段，每段200字以内，可按需调整。**\n}}",
            "constant": true,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 1002,
            "position": 4,
            "disable": false,
            "excludeRecursion": true,
            "preventRecursion": true,
            "matchPersonaDescription": false,
            "matchCharacterDescription": false,
            "matchCharacterPersonality": false,
            "matchCharacterDepthPrompt": false,
            "matchScenario": false,
            "matchCreatorNotes": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 999,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": null,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 0,
            "displayIndex": 1
        },
        "1": {
            "key": [],
            "keysecondary": [],
            "comment": "===参数配置===",
            "content": "{{setglobalvar::tableConfigCoTBegin::<think>}}{{setglobalvar::tableConfigCoTEnd::</think>}}{{//思维链标签，如think、thinking等，若使用“无共同使用思维链”则无需修改}}\n{{setglobalvar::tableConfigContentBegin::<content>}}{{setglobalvar::tableConfigContentEnd::</content>}}{{//正文标签，如content等，若原本无标签包裹正文则保持content即可}}\n{{setglobalvar::tableConfigEventRows::1-3}}{{setglobalvar::tableConfigEventLength::30字以内}}{{//事件历史表每轮总结行数、每行字数}}\n{{setglobalvar::tableConfigGrandSummaryRows::5}}{{setglobalvar::tableConfigGrandSummaryLength::200字以内}}{{//大总结表每次总结行数、每行字数，默认的5行、200字以内适合于比如一百来层大总结一次的情形，可按需调整}}",
            "constant": true,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 1002,
            "position": 4,
            "disable": false,
            "excludeRecursion": false,
            "preventRecursion": true,
            "matchPersonaDescription": false,
            "matchCharacterDescription": false,
            "matchCharacterPersonality": false,
            "matchCharacterDepthPrompt": false,
            "matchScenario": false,
            "matchCreatorNotes": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 999,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": null,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 1,
            "displayIndex": 2
        },
        "2": {
            "key": [],
            "keysecondary": [],
            "comment": "表格提示词",
            "content": "<memory_table_guide>\n<table_rules>\n在回复{{getglobalvar::tableConfigContentEnd}}及其他要求的标签封闭后，进行表格思考<tableThink>，仅限以下内容，范例格式见后续<table_example>内<tableThink>：\n1. 依据<user_request>内容记录当前用户是否要求执行大总结\n2. 本轮剧情摘要(30~120字)\n3. 依据各表格【增删改触发条件】检查哪些表格和条目应更新、删除、插入，对每一行的分析遵循以下格式：“[#行号 (仅限更新和删除)]行名称(操作理由)[:针对每列内容单独分析更新时哪些列需要更新]”\n\n在每轮<tableThink>标签后进行表格操作<tableEdit>：\n依表格序号顺序逐一处理表格，对每个表格依updateRow→deleteRow→insertRow顺序遵循【增删改触发条件】执行表格操作\n</table_rules>\n<table_operations> \n对每个表格必须严格依更新→删除→插入顺序执行:\n更新内容:updateRow(tableIndex:num,rowIndex:num,{[colIndex:num]:str/num,…})\n删除整行:deleteRow(tableIndex:num,rowIndex:num)\n插入整行:insertRow(tableIndex:num,{[colIndex:num]:str/num,…})\n同一表格内的多行删除必须逆序删除\n</table_operations>\n<table_structure>\n0:当前信息-时间（YYYY-MM-DD 星期X hh:mm，依据故事推进）/地点（国家/城区/地址/具体位置，可简化）/<user>拥有资金\n1:近期角色-角色名/离场轮数（若本轮回复出场则重置为0，否则在原值基础上+1，所有行总是更新，达到5且未出场时在近期角色表处理**最后**删除行）/位置（仅限具体位置，包括与临近角色的位置关系）/姿势/情绪/身体状态（如汗、伤、泪、性器官变化等）/服装（包含服装状态，脱衣时标注原服装及已脱，损毁时标注损毁）\n2:角色信息-角色名/性别/年龄/身份/住所（非所在地）/身体特征（不含服装、姿势、状态）/服装偏好（风格、必备配饰等，并非当前服装）/性格（不含情绪）/喜好（兴趣、爱好、嗜好品等，并非本职）/目标/关系（是<user>的——）/对<user>态度（包括好感度/关系值等,不含情绪）/其他重要信息\n3:任务及日程-执行人/任务或日程（即执行人所需行动）/委托人/报酬/地点/起始时间/结束或限制时间（无限制则填N/A）\n4:能力-拥有人/能力名/效果/代价/来源\n5:物品-拥有人/物品名/数量/描述/效果或意义/来源\n6:事件历史-时间（YYYY-MM-DD 时段）/地点（国家/城区/地址，可简化）/事件（{{getglobalvar::tableConfigEventLength}}）\n7:大总结-时间范围（精确到天）/内容（仅依据事件历史表格）\n</table_structure>\n<table_example>【近期角色表已有Alice、Bob、Carol、Dan四行，离场轮数分别为0、0、5、2，角色信息表已有Alice、Bob、Carol、Dan四行】\n<tableThink>\n<!--\n当前用户不要求执行大总结\n2025-09-11 星期二 13:00/Alice、Dan、Eve和Frank在咖啡馆讨论项目，Alice支付了咖啡费用，四人讨论激烈\n\n0:当前信息表\n更新:\n#0 全部(总是更新):时间/地点/资金\n1:近期角色表\n更新:\n#0 Alice(新一天发生变化):离场轮数置0/位置/姿势/情绪/身体状态/服装\n#1 Bob(保持离场):离场轮数0+1到1\n#3 Dan(当前发生变化):离场轮数置0/位置/服装\n删除:\n#2 Carol(离场达到5且本轮未出场)\n插入:\nEve(新出场)\nFrank(新出场)\n2:角色信息表\n更新:\n#3 Dan(透露也喜欢咖啡):喜好\n删除:\n用户未要求删除\n插入:\nEve(新角色)\nFrank(新角色)\n3:任务及日程表\n更新:\n无变化\n删除:\n无任务或日程结束\n插入:\n无新接受任务或日程\n4:能力表\n更新:\n无变化\n删除:\n无能力失去\n插入:\n无新能力\n5:物品表\n更新:\n无变化\n删除:\n无物品失去\n插入:\n项目计划书(新重要物品)\n6:事件历史表\n删除:\n不要求大总结，不删除\n插入:\n1行新事件历史(剧情简单，无需多行)\n7:大总结表\n插入:\n不要求大总结\n-->\n</tableThink>\n<tableEdit>\n<!--\nupdateRow(0,0,{\"0\":\"2025-09-11 星期二 13:00\",\"1\":\"中国/上海徐汇区/咖啡馆/大厅/桌边\",\"2\":\"120元\"})\nupdateRow(1,0,{\"1\":\"0\",\"2\":\"沙发旁/Dan、Eve旁，Frank对面\",\"3\":\"站立\",\"4\":\"兴奋\",\"5\":\"微汗\",\"6\":\"浅紫连衣裙\"})\nupdateRow(1,1,{\"1\":\"1\"})\nupdateRow(1,3,{\"1\":\"0\",\"2\":\"沙发旁/Alice、Eve旁，Frank对面\",\"6\":\"白衬衫/长裤\"})\ndeleteRow(1,2)\ninsertRow(1,{\"0\":\"Eve\",\"1\":\"0\",\"2\":\"沙发上/Alice、Dan旁，Frank对面\",\"3\":\"坐着/环顾\",\"4\":\"好奇\",\"5\":\"脸红\",\"6\":\"浅蓝短袖/牛仔短裤\"})\ninsertRow(1,{\"0\":\"Frank\",\"1\":\"0\",\"2\":\"沙发上/Alice、Dan、Eve对面\",\"3\":\"坐着\",\"4\":\"投入\",\"5\":\"如常\",\"6\":\"深灰西装\"})\nupdateRow(2,3,{\"8\":\"台球/咖啡\"})\ninsertRow(2,{\"0\":\"Eve\",\"1\":\"女\",\"2\":\"18\",\"3\":\"学生\",\"4\":\"上海徐汇区/复旦枫林校区/女生宿舍4-516\",\"5\":\"纤瘦/及腰黑色长发\",\"6\":\"轻便运动装\",\"7\":\"活泼\",\"8\":\"网球\",\"9\":\"学业进步/维持社团\",\"10\":\"网友\",\"11\":\"友好\",\"12\":\"常发动态\"})\ninsertRow(2,{\"0\":\"Frank\",\"1\":\"男\",\"2\":\"22\",\"3\":\"文员\",\"4\":\"上海闵行区/迎春小区/5栋201\",\"5\":\"高挑/健壮/整齐的黑色短发/右腹纹身\",\"6\":\"干练正装\",\"7\":\"沉稳/精明\",\"8\":\"调酒\",\"9\":\"职业发展/协助Alice\",\"10\":\"同学/朋友\",\"11\":\"关心\",\"12\":\"新入职员\"})\ninsertRow(5,{\"0\":\"Alice\",\"1\":\"项目计划书\",\"2\":\"1\",\"3\":\"装订的一叠文件\",\"4\":\"详细介绍Alice的项目\",\"5\":\"自己撰写\"})\ninsertRow(6,{\"0\":\"2025-09-11 上午\",\"1\":\"中国/上海徐汇区/咖啡馆\",\"2\":\"Alice、Dan、Eve和Frank在咖啡馆激烈讨论项目\"})\n-->\n</tableEdit>\n</table_example>\n<table_stored>\nCurrently stored memory table that you need to base upon:\n{{tableData}}\n</table_stored>\n</memory_table_guide>",
            "constant": true,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 993,
            "position": 4,
            "disable": false,
            "excludeRecursion": false,
            "preventRecursion": true,
            "matchPersonaDescription": false,
            "matchCharacterDescription": false,
            "matchCharacterPersonality": false,
            "matchCharacterDepthPrompt": false,
            "matchScenario": false,
            "matchCreatorNotes": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 1,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": null,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 2,
            "displayIndex": 3
        },
        "3": {
            "key": [],
            "keysecondary": [],
            "comment": "用户指令前分隔",
            "content": "<user_request>",
            "constant": true,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 999,
            "position": 4,
            "disable": false,
            "excludeRecursion": false,
            "preventRecursion": true,
            "matchPersonaDescription": false,
            "matchCharacterDescription": false,
            "matchCharacterPersonality": false,
            "matchCharacterDepthPrompt": false,
            "matchScenario": false,
            "matchCreatorNotes": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 1,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": null,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 3,
            "displayIndex": 4
        },
        "4": {
            "key": [],
            "keysecondary": [],
            "comment": "用户指令后分隔",
            "content": "</user_request>",
            "constant": true,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": -1000,
            "position": 4,
            "disable": false,
            "excludeRecursion": false,
            "preventRecursion": true,
            "matchPersonaDescription": false,
            "matchCharacterDescription": false,
            "matchCharacterPersonality": false,
            "matchCharacterDepthPrompt": false,
            "matchScenario": false,
            "matchCreatorNotes": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 0,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": null,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 4,
            "displayIndex": 5
        },
        "5": {
            "key": [
                "后置强调（必选二选一）（与思维链共同使用）"
            ],
            "keysecondary": [],
            "comment": "后置强调（必选二选一）（与思维链共同使用）",
            "content": "<format_request>\n# 格式要求\n你必须根据有关要求及<table_stored>的内容，补完{{getglobalvar::tableConfigCoTBegin}}、{{getglobalvar::tableConfigContentBegin}}、<tableThink>、<tableEdit>及其他要求的标签和内容，遵守:\n1. 先输出{{getglobalvar::tableConfigCoTBegin}}标签及思考内容，{{getglobalvar::tableConfigCoTBegin}}内禁止包含正文、<tableThink>或<tableEdit>，思考完成时立即输出{{getglobalvar::tableConfigCoTEnd}}。\n2. 在{{getglobalvar::tableConfigCoTEnd}}后，立即输出{{getglobalvar::tableConfigContentBegin}}标签及正文内容，只用简体中文，必须以{{getglobalvar::tableConfigContentEnd}}封闭正文。\n3. 在{{getglobalvar::tableConfigContentEnd}}后，立即分别输出<tableThink>和<tableEdit>标签及内容，只用简体中文。必须依据前述本轮回复的正文和<table_stored>的内容，严格遵循<memory_table_guide>的要求，进行所有必要的改/删/增。注意：\n  - 当前信息表中的时间必须遵循YYYY-MM-DD 星期X hh:mm的格式；必须首先依据故事准确估计推进了多少时间（应采取较少的时间估计），然后再加到原时间上得到现时间，并更新。\n  - 近期角色表中的服装需要包括当前具体服装款式和状态：更换服装时需要修改对应条目且不保留原服装；脱下服装（包括裸体）时保留原服装并标注(脱)而非删除服装；服装受损属于需要标注的状态；服装完全损毁时删除\n  - 近期角色表中“出场”指角色自身是否在**本轮你的回复**中所涉及的**任何**场景（不限于本轮回复的最后场景）出场。**所有角色**必须检查：\n    - 角色明确描述在场景中，或未被描述但可以推测存在于场景中，属于出场，必须更新所有列为故事结尾的最新状态，离场轮数重置为0\n    - 角色不在场景中，仅被其他角色提及或未被提及，或仅在历史消息中出场，均属于离场，离场轮数必须在原值基础上+1，其余列保持不变\n    - 所有本轮未出场且离场轮数达到5以上的角色，**必须**在近期角色表处理的**最后**逆序删除，且仅限删除离场轮数5以上的角色\n  - 角色信息表中年龄必须给出准确值，禁止给出约数；性格和态度**不含**情绪；身体特征不含服装、姿势、状态；服装偏好指风格、必备配饰等，禁止包含当前服装；喜好指兴趣、爱好、嗜好品等，禁止与本职相同；对{{user}}态度包括好感度/关系值等数值且不含情绪，仅限设定存在这些数值时才允许填写，此时必须为（除{{user}}自身外）每个角色填写；只有发生重大事件才会**改变**角色信息表；注意回复中出现角色信息表内没有的新角色时总是插入新行；注意角色离开当前场景禁止删除角色，仅限用户要求才能删除角色\n  - 角色信息表中的{{user}}行，关系和态度必须保持N/A\n  - 作为背景的次要群体按每个群体一行记入近期角色表和角色信息表，当其中有具体描述的重要个体时再另外记录一行\n  - 共同执行任务、安排日程、拥有能力、拥有物品的角色，若相关条目一致，必须合并为一行并在角色名中列出所有有关角色，禁止为多个角色添加相同行而不合并\n  - 任务及日程表中只记录角色明确接受的任务及明确计划进行的日程；任务或日程仅进行到不同步骤而无其他变化时禁止更新任务和日程表；执行人总是倾向于完成任务及日程，禁止随意无视或放弃\n  - 物品表仅记录重要物品\n  - 事件历史表格每条回复只新增{{getglobalvar::tableConfigEventRows}}条，每条{{getglobalvar::tableConfigEventLength}}\n  - 用户在<user_request>中要求“大总结”时，仅依据事件历史表格输出对大总结表格的操作，禁止重复总结已有大总结表格内容，禁止将大总结输出到正文（{{getglobalvar::tableConfigContentBegin}}）中\n  - 注意对于本轮插入的行禁止更新，必须直接按最终信息插入；当任何表格信息不变时禁止更新，当任何原本未知的表格信息在上文给出时必须在本轮更新\n  - 表格处理顺序必须严格遵循表格序号，从0:当前信息表起逐一处理\n  - 对每个表格内处理顺序必须严格遵循：更新:updateRow→删除:deleteRow→插入:insertRow，禁止删除在更新前，同一表格内的多行删除必须逆序删除\n  - 任何表格已有信息都是已经在故事中出现过的，并非初次出现，比如禁止描述表格已有角色为初次见面\n  - 表格操作注意：\n    - 所有键加双引号\"，禁止单引号'\n    - 值内用/分隔，禁止用,\n    - 值内无引号\"或'\n    - 键与值一一对应\n    - 记录内容尽可能与其他记录方式保持一致\n4. 在</tableEdit>后再输出**所有**其他要求输出的标签及内容\n5. {{getglobalvar::tableConfigCoTBegin}}、{{getglobalvar::tableConfigContentBegin}}、<tableThink>、<tableEdit>及其他要求输出的标签本身必须正确包裹有关内容，包括各自结尾处的{{getglobalvar::tableConfigCoTEnd}}、{{getglobalvar::tableConfigContentEnd}}、</tableThink>和</tableEdit>等。以上四个标签互斥，禁止互相包含。必须严格遵循这些标签名，禁止翻译或进行其他修改，禁止遗漏结尾标签内的/。",
            "constant": true,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 999,
            "position": 4,
            "disable": false,
            "excludeRecursion": false,
            "preventRecursion": true,
            "matchPersonaDescription": false,
            "matchCharacterDescription": false,
            "matchCharacterPersonality": false,
            "matchCharacterDepthPrompt": false,
            "matchScenario": false,
            "matchCreatorNotes": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 0,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": null,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 5,
            "displayIndex": 6
        },
        "6": {
            "key": [
                "后置强调（必选二选一）（无共同使用思维链）"
            ],
            "keysecondary": [],
            "comment": "后置强调（必选二选一）（无共同使用思维链）",
            "content": "# 格式要求\n你必须根据有关要求及<table_stored>的内容，补完{{getglobalvar::tableConfigContentBegin}}、<tableThink>、<tableEdit>及其他要求的标签和内容，遵守:\n1. 先输出任何要求在正文前输出的内容，如果存在。\n2. 在以上内容后，立即输出{{getglobalvar::tableConfigContentBegin}}标签及正文内容，只用简体中文，必须以{{getglobalvar::tableConfigContentEnd}}封闭正文。\n3. 在{{getglobalvar::tableConfigContentEnd}}后，立即分别输出<tableThink>和<tableEdit>标签及内容，只用简体中文。必须依据前述本轮回复的正文和<table_stored>的内容，严格遵循<memory_table_guide>的要求，进行所有必要的改/删/增。注意：\n  - 当前信息表中的时间必须遵循YYYY-MM-DD 星期X hh:mm的格式；必须首先依据故事准确估计推进了多少时间（应采取较少的时间估计），然后再加到原时间上得到现时间，并更新。\n  - 近期角色表中的服装需要包括当前具体服装款式和状态：更换服装时需要修改对应条目且不保留原服装；脱下服装（包括裸体）时保留原服装并标注(脱)而非删除服装；服装受损属于需要标注的状态；服装完全损毁时删除\n  - 近期角色表中“出场”指角色自身是否在**本轮你的回复**中所涉及的**任何**场景（不限于本轮回复的最后场景）出场。**所有角色**必须检查：\n    - 角色明确描述在场景中，或未被描述但可以推测存在于场景中，属于出场，必须更新所有列为故事结尾的最新状态，离场轮数重置为0\n    - 角色不在场景中，仅被其他角色提及或未被提及，或仅在历史消息中出场，均属于离场，离场轮数必须在原值基础上+1，其余列保持不变\n    - 所有本轮未出场且离场轮数达到5以上的角色，**必须**在近期角色表处理的**最后**逆序删除，且仅限删除离场轮数5以上的角色\n  - 角色信息表中年龄必须给出准确值，禁止给出约数；性格和态度**不含**情绪；身体特征不含服装、姿势、状态；服装偏好指风格、必备配饰等，禁止包含当前服装；喜好指兴趣、爱好、嗜好品等，禁止与本职相同；对{{user}}态度不含情绪；只有发生重大事件才会**改变**角色信息表；注意回复中出现角色信息表内没有的新角色时总是插入新行；注意角色离开当前场景禁止删除角色，仅限用户要求才能删除角色\n  - 角色信息表中的{{user}}行，关系和态度必须保持N/A\n  - 作为背景的次要群体按每个群体一行记入近期角色表和角色信息表，当其中有具体描述的重要个体时再另外记录一行\n  - 共同执行任务、安排日程、拥有能力、拥有物品的角色，若相关条目一致，必须合并为一行并在角色名中列出所有有关角色，禁止为多个角色添加相同行而不合并\n  - 任务及日程表中只记录角色明确接受的任务及明确计划进行的日程；任务或日程仅进行到不同步骤而无其他变化时禁止更新任务和日程表；执行人总是倾向于完成任务及日程，禁止随意无视或放弃\n  - 物品表仅记录重要物品\n  - 事件历史表格每条回复只新增{{getglobalvar::tableConfigEventRows}}条，每条{{getglobalvar::tableConfigEventLength}}\n  - 用户在<user_request>中要求“大总结”时，仅依据事件历史表格输出对大总结表格的操作，禁止重复总结已有大总结表格内容，禁止将大总结输出到正文（{{getglobalvar::tableConfigContentBegin}}）中\n  - 若前述设定包含状态数值，必须将这些数值填入适当的表格中，禁止遗漏。但仅限设定存在这些数值时才允许填写，禁止编造未设定的数值。例如：\n    - 若有好感度/关系值等数值，应填入角色信息表-对{{user}}态度（除{{user}}自身一行外）\n    - 若有疲劳值/饥饿值/口渴值等数值，应填入近期角色表-身体状态\n  - 注意对于本轮插入的行禁止更新，必须直接按最终信息插入；当任何表格信息不变时禁止更新，当任何原本未知的表格信息在上文给出时必须在本轮更新\n  - 表格处理顺序必须严格遵循表格序号，从0:当前信息表起逐一处理\n  - 对每个表格内处理顺序必须严格遵循：更新:updateRow→删除:deleteRow→插入:insertRow，禁止删除在更新前，同一表格内的多行删除必须逆序删除\n  - 任何表格已有信息都是已经在故事中出现过的，并非初次出现，比如禁止描述表格已有角色为初次见面\n  - 表格操作注意：\n    - 所有键加双引号\"，禁止单引号'\n    - 值内用/分隔，禁止用,\n    - 值内无引号\"或'\n    - 键与值一一对应\n    - 记录内容尽可能与其他记录方式保持一致\n4. 在</tableEdit>后再输出**所有**其他要求输出的标签及内容\n5. {{getglobalvar::tableConfigContentBegin}}、<tableThink>、<tableEdit>及其他要求输出的标签本身必须正确包裹有关内容，包括各自结尾处的{{getglobalvar::tableConfigContentEnd}}、</tableThink>和</tableEdit>等。以上三个标签互斥，禁止互相包含。必须严格遵循这些标签名，禁止翻译或进行其他修改，禁止遗漏结尾标签内的/。",
            "constant": true,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 999,
            "position": 4,
            "disable": true,
            "excludeRecursion": false,
            "preventRecursion": true,
            "matchPersonaDescription": false,
            "matchCharacterDescription": false,
            "matchCharacterPersonality": false,
            "matchCharacterDepthPrompt": false,
            "matchScenario": false,
            "matchCreatorNotes": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 0,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": null,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 6,
            "displayIndex": 7
        },
        "7": {
            "key": [
                "推测填表加强（最多四选一或不选）（首条消息额外加强，需提示词模板插件[https://github.com/zonde306/ST-Prompt-Template/]，建议前几楼开启正则）"
            ],
            "keysecondary": [],
            "comment": "推测填表加强（最多四选一或不选）（首条消息额外加强，需提示词模板插件[https://github.com/zonde306/ST-Prompt-Template/]，建议前几楼开启正则）",
            "content": "<%_ if (SillyTavern.chat.length < 4) { _%>\n6. 注意你必须在<tableEdit>中为表格完整填写所有必要的插入:insertRow，禁止使用更新:updateRow，每一行每一列均必须填写，若上文未给出足够信息则逐一检查以下各项，直到得到所需信息则**立即结束**不再执行后续未执行的步骤：\n  1. 仅限上文信息不足，如果是同人角色，依据未被上文提及的原设定\n  2. 若1信息不足，依据上文内容的合理推测\n  3. 若2信息不足，参考上文内容和风格，随机生成适当的新设定并填入\n  **禁止直接不填写一列，禁止填写\"未知\"、\"不确定\"、null或\"\"等未知项**\n  **必须直接填写内容，禁止标注\"原设\"/\"推测\"/\"可能\"等**\n7. 你必须额外在<tableThink>中，对当前信息表的每一列（时间/地点/{{user}}拥有资金）执行上述推测步骤进行分析并输出过程，且时间一列只需推测当前时间而无需考虑时间推进，这是对<tableThink>中分析过程的唯二修改要求，仅限当前信息表。两个格式范例如下（仅作为格式范例，与内容无关）：\n<current_stat_example_1>\n0:当前信息表\n插入:\n全部(故事起始):\n  时间:上文未提及当前时间，开始推测：1.非同人;2.上文为现代背景，上午第一节课，无进一步线索;3.对于现代背景故事，在2000-2030年间挑选年份，设定为2025年6月11日 星期三 9:00\n  地点:上文未提及具体地点，开始推测：1.非同人;2.上文提及这是高中教室，且角色使用日本姓名，设定为日本/大阪/北野高等学校/教室，**结束推测**\n  资金:上文提及钱包内2000日元，无需推测\n</current_stat_example_1>\n<current_stat_example_2>\n0:当前信息表\n插入:\n全部(故事起始):\n  时间:提及年份为DR 1358，缺乏具体月日时间，开始推测：1.FR同人，但无相关信息;2.上文为春季，在3-5月间挑选月份，设定为DR 1358年3月18日 星期五 11:30，**结束推测**\n  地点:提及位于苏萨尔的酒馆，缺乏地区，开始推测：1.FR同人，苏萨尔位于费伦/科米尔，**结束推测**\n  资金:上文未提及当前资金，开始推测：1.FR同人，货币单位为gp，无进一步线索;2.角色为1级法师，初始资金75gp，**结束推测**\n</current_stat_example_2>\n8. 你必须将包括{{user}}在内的所有出场角色的信息填入角色信息表的每一列，**禁止填写\"未知\"、null或空字符串\"\"等**。其中{{user}}总是**首先**插入近期角色表和角色信息表。\n  <%_ } else { _%>\n6. 注意你必须为表格完整填写所有必要的更新:updateRow→删除:deleteRow→插入:insertRow，每一行每一列均必须填写，若上文未给出足够信息则逐一检查以下各项，直到得到所需信息则**立即结束**不再执行后续未执行的步骤：\n  1. 上文提及内容\n  2. 如果是同人角色，依据未被上文提及的原设定\n  3. 依据上文内容的合理推测\n  4. 参考上文内容和风格，随机生成适当的新设定并填入\n  **禁止直接不填写一列，禁止填写\"未知\"、\"不确定\"、null或\"\"等未知项**\n  **必须直接填写内容，禁止标注\"原设\"/\"推测\"/\"可能\"等**\n  一些推测过程范例如下（仅作为推测过程范例，与内容无关，且**禁止输出推测过程**）：\n<presume_examples>\n当前信息表-时间:上文未提及当前时间，开始推测：1.非同人;2.依据故事估计推进了30分钟，加到原时间上，设定为2008年8月12日 星期二 13:30，**结束推测**\n当前信息表-资金:上文未提及当前资金，开始推测：1.FR同人，货币单位为gp，无进一步线索;2.角色花费2gp购买匕首，从原资金扣除，设定为18gp，**结束推测**\n近期角色表-更新{{user}}行-服装:上文提及上衣被撕开，设定为短袖(破损)+短裤，无需推测\n角色信息表-插入李雷行-年龄:上文提及是初中生，设定为14岁，无需推测\n角色信息表-插入李雷行-性格:上文未提及李雷性格，开始推测：1.非同人;2.上文无线索;3.设定为开朗外向\n</presume_examples>\n<%_ } _%>\n",
            "constant": true,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 1000,
            "position": 4,
            "disable": false,
            "excludeRecursion": false,
            "preventRecursion": true,
            "matchPersonaDescription": false,
            "matchCharacterDescription": false,
            "matchCharacterPersonality": false,
            "matchCharacterDepthPrompt": false,
            "matchScenario": false,
            "matchCreatorNotes": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 0,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": null,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 7,
            "displayIndex": 8
        },
        "8": {
            "key": [
                "推测填表加强（最多四选一或不选）（仅首条消息激活，需提示词模板插件[https://github.com/zonde306/ST-Prompt-Template/]，建议前几楼开启正则）"
            ],
            "keysecondary": [],
            "comment": "推测填表加强（最多四选一或不选）（仅首条消息激活，需提示词模板插件[https://github.com/zonde306/ST-Prompt-Template/]，建议前几楼开启正则）",
            "content": "<%_ if (SillyTavern.chat.length < 4) { _%>\n6. 注意你必须在<tableEdit>中为表格完整填写所有必要的插入:insertRow，禁止使用更新:updateRow，每一行每一列均必须填写，若上文未给出足够信息则逐一检查以下各项，直到得到所需信息则**立即结束**不再执行后续未执行的步骤：\n  1. 仅限上文信息不足，如果是同人角色，依据未被上文提及的原设定\n  2. 若1信息不足，依据上文内容的合理推测\n  3. 若2信息不足，参考上文内容和风格，随机生成适当的新设定并填入\n  **禁止直接不填写一列，禁止填写\"未知\"、\"不确定\"、null或\"\"等未知项**\n  **必须直接填写内容，禁止标注\"原设\"/\"推测\"/\"可能\"等**\n7. 你必须额外在<tableThink>中，对当前信息表的每一列（时间/地点/{{user}}拥有资金）执行上述推测步骤进行分析并输出过程，且时间一列只需推测当前时间而无需考虑时间推进，这是对<tableThink>中分析过程的唯二修改要求，仅限当前信息表。两个格式范例如下（仅作为格式范例，与内容无关）：\n<current_stat_example_1>\n0:当前信息表\n插入:\n全部(故事起始):\n  时间:上文未提及当前时间，开始推测：1.非同人;2.上文为现代背景，上午第一节课，无进一步线索;3.对于现代背景故事，在2000-2030年间挑选年份，设定为2025年6月11日 星期三 9:00\n  地点:上文未提及具体地点，开始推测：1.非同人;2.上文提及这是高中教室，且角色使用日本姓名，设定为日本/大阪/北野高等学校/教室，**结束推测**\n  资金:上文提及钱包内2000日元，无需推测\n</current_stat_example_1>\n<current_stat_example_2>\n0:当前信息表\n插入:\n全部(故事起始):\n  时间:提及年份为DR 1358，缺乏具体月日时间，开始推测：1.FR同人，但无相关信息;2.上文为春季，在3-5月间挑选月份，设定为DR 1358年3月18日 星期五 11:30，**结束推测**\n  地点:提及位于苏萨尔的酒馆，缺乏地区，开始推测：1.FR同人，苏萨尔位于费伦/科米尔，**结束推测**\n  资金:上文未提及当前资金，开始推测：1.FR同人，货币单位为gp，无进一步线索;2.角色为1级法师，初始资金75gp，**结束推测**\n</current_stat_example_2>\n8. 你必须将包括{{user}}在内的所有出场角色的信息填入角色信息表的每一列，**禁止填写\"未知\"、null或空字符串\"\"等**。其中{{user}}总是**首先**插入近期角色表和角色信息表。\n<%_ } _%>\n",
            "constant": true,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 1000,
            "position": 4,
            "disable": true,
            "excludeRecursion": false,
            "preventRecursion": true,
            "matchPersonaDescription": false,
            "matchCharacterDescription": false,
            "matchCharacterPersonality": false,
            "matchCharacterDepthPrompt": false,
            "matchScenario": false,
            "matchCreatorNotes": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 0,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": null,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 8,
            "displayIndex": 9
        },
        "9": {
            "key": [
                "推测填表加强（最多四选一或不选）（常驻）"
            ],
            "keysecondary": [],
            "comment": "推测填表加强（最多四选一或不选）（常驻）",
            "content": "6. 注意你必须为表格完整填写所有必要的更新:updateRow→删除:deleteRow→插入:insertRow，每一行每一列均必须填写，若上文未给出足够信息则逐一检查以下各项，直到得到所需信息则**立即结束**不再执行后续未执行的步骤：\n  1. 上文提及内容\n  2. 如果是同人角色，依据未被上文提及的原设定\n  3. 依据上文内容的合理推测\n  4. 参考上文内容和风格，随机生成适当的新设定并填入\n  **禁止直接不填写一列，禁止填写\"未知\"、\"不确定\"、null或\"\"等未知项**\n  **必须直接填写内容，禁止标注\"原设\"/\"推测\"/\"可能\"等**\n  一些推测过程范例如下（仅作为推测过程范例，与内容无关，且**禁止输出推测过程**）：\n<presume_examples>\n当前信息表-时间:上文未提及当前时间，开始推测：1.非同人;2.依据故事估计推进了30分钟，加到原时间上，设定为2008年8月12日 星期二 13:30，**结束推测**\n当前信息表-资金:上文未提及当前资金，开始推测：1.FR同人，货币单位为gp，无进一步线索;2.角色花费2gp购买匕首，从原资金扣除，设定为18gp，**结束推测**\n近期角色表-更新{{user}}行-服装:上文提及上衣被撕开，设定为短袖(破损)+短裤，无需推测\n角色信息表-插入李雷行-年龄:上文提及是初中生，设定为14岁，无需推测\n角色信息表-插入李雷行-性格:上文未提及李雷性格，开始推测：1.非同人;2.上文无线索;3.设定为开朗外向\n</presume_examples>\n",
            "constant": true,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 1000,
            "position": 4,
            "disable": true,
            "excludeRecursion": false,
            "preventRecursion": true,
            "matchPersonaDescription": false,
            "matchCharacterDescription": false,
            "matchCharacterPersonality": false,
            "matchCharacterDepthPrompt": false,
            "matchScenario": false,
            "matchCreatorNotes": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 0,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": null,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 9,
            "displayIndex": 10
        },
        "10": {
            "key": [
                "推测填表加强（最多四选一或不选）（手动首楼开启）"
            ],
            "keysecondary": [],
            "comment": "推测填表加强（最多四选一或不选）（手动首楼开启）",
            "content": "6. 注意你必须在<tableEdit>中为表格完整填写所有必要的插入:insertRow，禁止使用更新:updateRow，每一行每一列均必须填写，若上文未给出足够信息则逐一检查以下各项，直到得到所需信息则**立即结束**不再执行后续未执行的步骤：\n  1. 仅限上文信息不足，如果是同人角色，依据未被上文提及的原设定\n  2. 若1信息不足，依据上文内容的合理推测\n  3. 若2信息不足，参考上文内容和风格，随机生成适当的新设定并填入\n  **禁止直接不填写一列，禁止填写\"未知\"、\"不确定\"、null或\"\"等未知项**\n  **必须直接填写内容，禁止标注\"原设\"/\"推测\"/\"可能\"等**\n7. 你必须额外在<tableThink>中，对当前信息表的每一列（时间/地点/{{user}}拥有资金）执行上述推测步骤进行分析并输出过程，且时间一列只需推测当前时间而无需考虑时间推进，这是对<tableThink>中分析过程的唯二修改要求，仅限当前信息表。两个格式范例如下（仅作为格式范例，与内容无关）：\n<current_stat_example_1>\n0:当前信息表\n插入:\n全部(故事起始):\n  时间:上文未提及当前时间，开始推测：1.非同人;2.上文为现代背景，上午第一节课，无进一步线索;3.对于现代背景故事，在2000-2030年间挑选年份，设定为2025年6月11日 星期三 9:00\n  地点:上文未提及具体地点，开始推测：1.非同人;2.上文提及这是高中教室，且角色使用日本姓名，设定为日本/大阪/北野高等学校/教室，**结束推测**\n  资金:上文提及钱包内2000日元，无需推测\n</current_stat_example_1>\n<current_stat_example_2>\n0:当前信息表\n插入:\n全部(故事起始):\n  时间:提及年份为DR 1358，缺乏具体月日时间，开始推测：1.FR同人，但无相关信息;2.上文为春季，在3-5月间挑选月份，设定为DR 1358年3月18日 星期五 11:30，**结束推测**\n  地点:提及位于苏萨尔的酒馆，缺乏地区，开始推测：1.FR同人，苏萨尔位于费伦/科米尔，**结束推测**\n  资金:上文未提及当前资金，开始推测：1.FR同人，货币单位为gp，无进一步线索;2.角色为1级法师，初始资金75gp，**结束推测**\n</current_stat_example_2>\n8. 你必须将包括{{user}}在内的所有出场角色的信息填入角色信息表的每一列，**禁止填写\"未知\"、null或空字符串\"\"等**。其中{{user}}总是**首先**插入近期角色表和角色信息表。\n",
            "constant": true,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 1000,
            "position": 4,
            "disable": true,
            "excludeRecursion": false,
            "preventRecursion": true,
            "matchPersonaDescription": false,
            "matchCharacterDescription": false,
            "matchCharacterPersonality": false,
            "matchCharacterDepthPrompt": false,
            "matchScenario": false,
            "matchCreatorNotes": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 0,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": null,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 10,
            "displayIndex": 11
        },
        "11": {
            "key": [],
            "keysecondary": [],
            "comment": "后置强调后分隔",
            "content": "</format_request>",
            "constant": true,
            "vectorized": false,
            "selective": true,
            "selectiveLogic": 0,
            "addMemo": true,
            "order": 1001,
            "position": 4,
            "disable": false,
            "excludeRecursion": false,
            "preventRecursion": true,
            "matchPersonaDescription": false,
            "matchCharacterDescription": false,
            "matchCharacterPersonality": false,
            "matchCharacterDepthPrompt": false,
            "matchScenario": false,
            "matchCreatorNotes": false,
            "delayUntilRecursion": false,
            "probability": 100,
            "useProbability": true,
            "depth": 0,
            "group": "",
            "groupOverride": false,
            "groupWeight": 100,
            "scanDepth": null,
            "caseSensitive": null,
            "matchWholeWords": null,
            "useGroupScoring": null,
            "automationId": "",
            "role": 0,
            "sticky": 0,
            "cooldown": 0,
            "delay": 0,
            "uid": 11,
            "displayIndex": 12
        }
    }
}